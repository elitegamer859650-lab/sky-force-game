<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SKY FORCE - GLOBAL CHAT</title>
    <style>
        body { margin: 0; background: #080808; color: white; font-family: sans-serif; height: 100vh; display: flex; flex-direction: column; }
        #chat-header { background: red; padding: 15px; text-align: center; font-weight: bold; letter-spacing: 2px; }
        #messages-container { flex: 1; padding: 20px; overflow-y: auto; background: rgba(255,0,0,0.02); }
        .msg { margin-bottom: 15px; padding: 10px; border-radius: 5px; max-width: 70%; }
        .msg.sent { background: #222; border-left: 3px solid cyan; align-self: flex-end; margin-left: auto; }
        .msg.received { background: #1a1a1a; border-left: 3px solid red; }
        .msg .sender { font-size: 10px; color: #888; margin-bottom: 5px; }
        #input-area { padding: 20px; background: #111; display: flex; gap: 10px; }
        input { flex: 1; padding: 12px; background: #000; border: 1px solid #333; color: white; }
        button { padding: 10px 25px; background: red; color: white; border: none; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

    <div id="chat-header">SECURE SQUAD CHAT [UID-TRACKING]</div>
    
    <div id="messages-container">
        </div>

    <div id="input-area">
        <input type="text" id="chat-input" placeholder="Enter secure message...">
        <button id="send-btn">SEND âš¡</button>
    </div>

    <script type="module">
        import { ChatEngine } from './src/chat-system.js';

        const myUID = "87654321"; // Focused Numeric UID [cite: 2025-12-23]
        const chat = new ChatEngine(myUID, "global_room_1");
        const container = document.getElementById('messages-container');
        const input = document.getElementById('chat-input');

        // Listen for new messages
        chat.listenToMessages((data) => {
            const div = document.createElement('div');
            const isMe = data.sender === myUID;
            div.className = `msg ${isMe ? 'sent' : 'received'}`;
            div.innerHTML = `<div class="sender">UID: ${data.sender}</div><div>${data.message}</div>`;
            container.appendChild(div);
            container.scrollTop = container.scrollHeight;
        });

        document.getElementById('send-btn').onclick = () => {
            chat.sendMessage(input.value);
            input.value = '';
        };
    </script>
</body>
</html>
