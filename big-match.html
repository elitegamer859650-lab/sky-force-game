<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SKY FORCE - BIG MATCH</title>
    <style>
        body { margin: 0; background: #000; overflow: hidden; font-family: 'Segoe UI', sans-serif; }
        #game-canvas { width: 100vw; height: 100vh; display: block; }
        
        /* Level 17+ Hardcore HUD [cite: 2025-12-23] */
        #hud-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; padding: 20px; box-sizing: border-box;
            display: flex; justify-content: space-between;
        }
        .stats { color: #00ffff; font-size: 18px; font-weight: bold; text-shadow: 2px 2px #000; }
        .crosshair { 
            position: absolute; top: 50%; left: 50%; 
            width: 20px; height: 20px; border: 2px solid rgba(255,0,0,0.5); 
            border-radius: 50%; transform: translate(-50%, -50%); 
        }
    </style>
</head>
<body>

    <div id="hud-overlay">
        <div class="stats">
            <div>UID: 87654321</div> <div style="color: gold;">HARDCORE MODE: ACTIVE</div>
        </div>
        <div class="stats" style="text-align: right;">
            <div>KILLS: 0</div>
            <div>ALIVE: 15</div>
        </div>
        <div class="crosshair"></div>
    </div>

    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.150.1/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.150.1/examples/jsm/"
            }
        }
    </script>
    <script type="module" src="src/big-match.js"></script>
    <div id="quick-chat-ui" style="position: absolute; right: 20px; top: 50%; transform: translateY(-50%); z-index: 100;">
    <button onclick="chat.sendQuickChat('ENEMY')" style="display:block; margin:5px; background:rgba(255,0,0,0.5); color:white; border:1px solid red; padding:10px;">‚ö†Ô∏è</button>
    <button onclick="chat.sendQuickChat('HELP')" style="display:block; margin:5px; background:rgba(0,0,255,0.5); color:white; border:1px solid blue; padding:10px;">üÜò</button>
    <button onclick="chat.sendQuickChat('STAY')" style="display:block; margin:5px; background:rgba(0,255,0,0.5); color:white; border:1px solid green; padding:10px;">üõ°Ô∏è</button>
</div>

<div id="message-log" style="position: absolute; left: 20px; bottom: 150px; color: yellow; font-weight: bold; pointer-events: none;"></div>

<script type="module">
    import { CombatChat } from './src/combat-chat.js';
    
    const matchID = "big_match_001"; // Dynamic match ID
    const myUID = localStorage.getItem('active_uid');
    window.chat = new CombatChat(matchID, myUID);

    const log = document.getElementById('message-log');
    chat.listenForMessages((data) => {
        const msg = document.createElement('div');
        msg.innerText = `${data.sender}: ${data.text}`;
        log.appendChild(msg);
        
        // 3 second baad message mita do [cite: 2025-12-18]
        setTimeout(() => msg.remove(), 3000);
    });
</script>
    <div id="kill-feed-container" style="position: absolute; top: 50px; left: 50%; transform: translateX(-50%); width: 400px; height: 100px; pointer-events: none; z-index: 200; display: flex; flex-direction: column; align-items: center;">
    </div>

<style>
    .kill-row {
        background: rgba(0, 0, 0, 0.7);
        border-left: 4px solid red;
        color: white;
        padding: 5px 20px;
        margin-bottom: 5px;
        font-family: 'Courier New', monospace;
        font-weight: bold;
        font-size: 14px;
        animation: slideIn 0.3s ease-out;
    }
    .killer { color: #00e5ff; } /* Cyan color for killer */
    .victim { color: #ff0000; } /* Red color for victim */
    @keyframes slideIn { from { transform: translateY(-20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
</style>

<script type="module">
    import { KillFeed } from './src/kill-feed.js';
    
    const feed = new KillFeed("big_match_001");
    const container = document.getElementById('kill-feed-container');

    feed.listen((data) => {
        const row = document.createElement('div');
        row.className = 'kill-row';
        row.innerHTML = `<span class="killer">${data.killer}</span> üî´ [${data.weapon}] <span class="victim">${data.victim}</span>`;
        
        container.appendChild(row);

        // 4 second baad kill feed se mita do [cite: 2025-12-18]
        setTimeout(() => {
            row.style.opacity = '0';
            row.style.transition = '0.5s';
            setTimeout(() => row.remove(), 500);
        }, 4000);
    });
</script>
    <div id="game-ui" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1000; font-family: 'Segoe UI', sans-serif;">
    
    <div style="position: absolute; top: 20px; left: 20px; width: 250px; pointer-events: auto;">
        <div style="color: white; font-weight: bold; margin-bottom: 5px; text-shadow: 2px 2px black;">PLAYER HP</div>
        <div style="width: 100%; height: 12px; background: rgba(0,0,0,0.5); border: 1px solid white; border-radius: 5px; overflow: hidden;">
            <div id="hp-fill" style="width: 100%; height: 100%; background: linear-gradient(to right, #ff0000, #00ff00); transition: 0.3s;"></div>
        </div>
    </div>

    <div id="gun-slot" style="position: absolute; top: 20px; right: 20px; width: 120px; height: 60px; background: rgba(0,0,0,0.6); border: 2px solid cyan; border-radius: 10px; display: flex; align-items: center; justify-content: center; pointer-events: auto;">
        <img src="assets/ui/mp5_icon.png" style="width: 80%; opacity: 0.9;">
        <div style="position: absolute; bottom: 2px; right: 5px; color: gold; font-size: 12px; font-weight: bold;">30/‚àû</div>
    </div>

    <div id="joystick-base" style="position: absolute; bottom: 50px; left: 50px; width: 150px; height: 150px; background: rgba(255,255,255,0.1); border-radius: 50%; border: 2px solid rgba(255,255,255,0.3); pointer-events: auto;">
        <div id="joystick-stick" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 60px; height: 60px; background: white; border-radius: 50%; opacity: 0.5;"></div>
    </div>

    <div style="position: absolute; bottom: 40px; right: 40px; display: flex; flex-direction: column; gap: 20px; pointer-events: auto;">
        
        <button id="btn-fire" style="width: 100px; height: 100px; background: url('assets/ui/fire_icon.png') no-repeat center; background-size: contain; background-color: rgba(255,0,0,0.4); border: 3px solid white; border-radius: 50%; cursor: pointer;" onmousedown="shoot()"></button>
        
        <div style="display: flex; gap: 15px; justify-content: flex-end;">
            <button onclick="jump()" style="width: 60px; height: 60px; background: rgba(255,255,255,0.2); border: 2px solid white; border-radius: 50%; color: white; font-weight: bold;">JUMP</button>
            <button onclick="useMedkit()" style="width: 60px; height: 60px; background: rgba(0,255,0,0.3); border: 2px solid #00ff00; border-radius: 10px; color: white; font-weight: bold;">MED</button>
        </div>
    </div>

    <div style="position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); display: flex; gap: 10px; pointer-events: auto;">
        <button onclick="openBag()" style="padding: 10px 20px; background: #333; color: white; border: 1px solid #555; border-radius: 5px;">BAG</button>
    </div>

</div>

</body>
</html>
